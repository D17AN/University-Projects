{"ast":null,"code":"import { HttpParams } from '@angular/common/http';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction ProductCatalogComponent_div_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"h3\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const product_r2 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(product_r2.NAME);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(product_r2.CATEGORY);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(product_r2.PRICE);\n  }\n}\nfunction ProductCatalogComponent_div_22_a_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"a\", 9);\n    i0.ɵɵlistener(\"click\", function ProductCatalogComponent_div_22_a_1_Template_a_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const p_r4 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r5.changePage(p_r4));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const p_r4 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(p_r4);\n  }\n}\nfunction ProductCatalogComponent_div_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 7);\n    i0.ɵɵtemplate(1, ProductCatalogComponent_div_22_a_1_Template, 2, 1, \"a\", 8);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.getPagesArray());\n  }\n}\nclass ProductCatalogComponent {\n  constructor(http) {\n    this.http = http;\n    this.products = [];\n    this.category = '';\n    this.page = 1;\n    this.count = 0;\n    this.perPage = 4;\n    this.pages = 0;\n    this.currentPage = 1;\n  }\n  ngOnInit() {\n    this.loadProducts();\n  }\n  loadProducts() {\n    let params = new HttpParams();\n    params = params.set('category', this.category);\n    params = params.set('page', this.page.toString());\n    this.getProducts(params).subscribe(response => {\n      this.products = response.products;\n      this.count = response.count;\n      this.pages = Math.ceil(this.count / this.perPage);\n      console.log('Products:', response); // Check the assigned products in the browser console\n    });\n  }\n\n  filterProducts() {\n    this.page = 1;\n    this.loadProducts();\n  }\n  changePage(page) {\n    this.currentPage = page;\n    this.loadProducts();\n  }\n  getProducts(params) {\n    return this.http.get('http://localhost/e-commerce%20store/backend/browseProducts.php', {\n      params: params\n    });\n  }\n  getPagesArray() {\n    return Array.from({\n      length: this.pages\n    }, (_, i) => i + 1);\n  }\n}\nProductCatalogComponent.ɵfac = function ProductCatalogComponent_Factory(t) {\n  return new (t || ProductCatalogComponent)(i0.ɵɵdirectiveInject(i1.HttpClient));\n};\nProductCatalogComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ProductCatalogComponent,\n  selectors: [[\"app-product-catalog\"]],\n  decls: 23,\n  vars: 3,\n  consts: [[\"id\", \"content\"], [\"href\", \"#\"], [\"type\", \"text\", \"placeholder\", \"Enter product name\", 3, \"ngModel\", \"ngModelChange\"], [3, \"click\"], [\"id\", \"product-list\"], [4, \"ngFor\", \"ngForOf\"], [\"id\", \"pagination\", 4, \"ngIf\"], [\"id\", \"pagination\"], [\"href\", \"#\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [\"href\", \"#\", 3, \"click\"]],\n  template: function ProductCatalogComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"nav\")(2, \"a\", 1);\n      i0.ɵɵtext(3, \"Browse Products\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"a\", 1);\n      i0.ɵɵtext(5, \"Add product to Cart\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"a\", 1);\n      i0.ɵɵtext(7, \"Update product\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"a\", 1);\n      i0.ɵɵtext(9, \"Remove product from Cart\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"a\", 1);\n      i0.ɵɵtext(11, \"See basket\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(12, \"br\");\n      i0.ɵɵelementStart(13, \"h1\");\n      i0.ɵɵtext(14, \"Product Catalog\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"input\", 2);\n      i0.ɵɵlistener(\"ngModelChange\", function ProductCatalogComponent_Template_input_ngModelChange_15_listener($event) {\n        return ctx.category = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(16, \"button\", 3);\n      i0.ɵɵlistener(\"click\", function ProductCatalogComponent_Template_button_click_16_listener() {\n        return ctx.filterProducts();\n      });\n      i0.ɵɵtext(17, \"Filter\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(18, \"br\")(19, \"br\");\n      i0.ɵɵelementStart(20, \"div\", 4);\n      i0.ɵɵtemplate(21, ProductCatalogComponent_div_21_Template, 7, 3, \"div\", 5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(22, ProductCatalogComponent_div_22_Template, 2, 1, \"div\", 6);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(15);\n      i0.ɵɵproperty(\"ngModel\", ctx.category);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngForOf\", ctx.products);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.pages > 1);\n    }\n  },\n  dependencies: [i2.NgForOf, i2.NgIf, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgModel],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});\nexport { ProductCatalogComponent };","map":{"version":3,"names":["HttpParams","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate","product_r2","NAME","CATEGORY","PRICE","ɵɵlistener","ProductCatalogComponent_div_22_a_1_Template_a_click_0_listener","restoredCtx","ɵɵrestoreView","_r6","p_r4","$implicit","ctx_r5","ɵɵnextContext","ɵɵresetView","changePage","ɵɵtemplate","ProductCatalogComponent_div_22_a_1_Template","ɵɵproperty","ctx_r1","getPagesArray","ProductCatalogComponent","constructor","http","products","category","page","count","perPage","pages","currentPage","ngOnInit","loadProducts","params","set","toString","getProducts","subscribe","response","Math","ceil","console","log","filterProducts","get","Array","from","length","_","i","ɵɵdirectiveInject","i1","HttpClient","selectors","decls","vars","consts","template","ProductCatalogComponent_Template","rf","ctx","ɵɵelement","ProductCatalogComponent_Template_input_ngModelChange_15_listener","$event","ProductCatalogComponent_Template_button_click_16_listener","ProductCatalogComponent_div_21_Template","ProductCatalogComponent_div_22_Template"],"sources":["C:\\Coding Apps\\Info - University\\Year 2\\Sem2 2022-2023\\Web Programming\\Lab\\XAMPP\\App\\htdocs\\e-commerce store\\frontend\\src\\app\\features\\components\\browseProducts\\product-catalog.component.ts","C:\\Coding Apps\\Info - University\\Year 2\\Sem2 2022-2023\\Web Programming\\Lab\\XAMPP\\App\\htdocs\\e-commerce store\\frontend\\src\\app\\features\\components\\browseProducts\\product-catalog.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { HttpClient, HttpParams } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'app-product-catalog',\r\n  templateUrl: './product-catalog.component.html',\r\n  styleUrls: ['./product-catalog.component.css']\r\n})\r\nexport class ProductCatalogComponent implements OnInit {\r\n  products: any[] = [];\r\n  category: string = '';\r\n  page: number = 1;\r\n  count: number = 0;\r\n  perPage: number = 4;\r\n  pages: number = 0;\r\n  currentPage: number = 1;\r\n\r\n  constructor(private http: HttpClient) { }\r\n\r\n  ngOnInit() {\r\n    this.loadProducts();\r\n  }\r\n\r\n  loadProducts() {\r\n    let params = new HttpParams();\r\n    params = params.set('category', this.category);\r\n    params = params.set('page', this.page.toString());\r\n\r\n    this.getProducts(params).subscribe(response => {\r\n      this.products = response.products;\r\n      this.count = response.count;\r\n      this.pages = Math.ceil(this.count / this.perPage);\r\n\r\n      console.log('Products:', response); // Check the assigned products in the browser console\r\n    });\r\n  }\r\n\r\n  filterProducts() {\r\n    this.page = 1;\r\n    this.loadProducts();\r\n  }\r\n\r\n  changePage(page: number) {\r\n    this.currentPage = page;\r\n    this.loadProducts();\r\n  }\r\n\r\n  getProducts(params: HttpParams): Observable<any> {\r\n    return this.http.get<any>('http://localhost/e-commerce%20store/backend/browseProducts.php', { params: params });\r\n  }\r\n\r\n  getPagesArray(): number[] {\r\n    return Array.from({ length: this.pages }, (_, i) => i + 1);\r\n  }\r\n}\r\n","<div id=\"content\">\r\n    <nav>\r\n      <a href=\"#\">Browse Products</a>\r\n      <a href=\"#\">Add product to Cart</a>\r\n      <a href=\"#\">Update product</a>\r\n      <a href=\"#\">Remove product from Cart</a>\r\n      <a href=\"#\">See basket</a>\r\n    </nav>\r\n    <br>\r\n    <h1>Product Catalog</h1>\r\n  \r\n    <!-- product name filter -->\r\n    <input type=\"text\" [(ngModel)]=\"category\" placeholder=\"Enter product name\">\r\n    <button (click)=\"filterProducts()\">Filter</button>\r\n    <br><br>\r\n  \r\n    <!-- product list -->\r\n    <div id=\"product-list\">\r\n      <div *ngFor=\"let product of products\">\r\n        <h3>{{ product.NAME }}</h3>\r\n        <p>{{ product.CATEGORY }}</p>\r\n        <p>{{ product.PRICE }}</p>\r\n      </div>\r\n    </div>\r\n  \r\n    <div *ngIf=\"pages > 1\" id=\"pagination\">\r\n      <a *ngFor=\"let p of getPagesArray()\" href=\"#\" (click)=\"changePage(p)\">{{ p }}</a>\r\n    </div>\r\n  </div>\r\n  "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}