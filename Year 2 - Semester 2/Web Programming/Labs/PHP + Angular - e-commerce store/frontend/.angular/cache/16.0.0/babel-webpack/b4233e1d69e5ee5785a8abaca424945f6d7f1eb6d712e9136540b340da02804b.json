{"ast":null,"code":"import { HttpParams } from '@angular/common/http';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/forms\";\nfunction ProductCatalogComponent_div_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"h3\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const product_r2 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(product_r2.NAME);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(product_r2.CATEGORY);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(product_r2.PRICE);\n  }\n}\nconst _c0 = function (a1) {\n  return [\"/products\", a1];\n};\nfunction ProductCatalogComponent_div_22_a_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 9);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const p_r4 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵclassProp(\"active\", p_r4 === ctx_r3.currentPage);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(4, _c0, p_r4));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(p_r4);\n  }\n}\nfunction ProductCatalogComponent_div_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 7);\n    i0.ɵɵtemplate(1, ProductCatalogComponent_div_22_a_1_Template, 2, 6, \"a\", 8);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.getPagesArray());\n  }\n}\nclass ProductCatalogComponent {\n  constructor(http) {\n    this.http = http;\n    this.products = [];\n    this.category = '';\n    this.page = 1;\n    this.count = 0;\n    this.perPage = 4;\n    this.pages = 0;\n    this.currentPage = 1;\n  }\n  ngOnInit() {\n    this.loadProducts();\n  }\n  loadProducts() {\n    let params = new HttpParams();\n    params = params.set('category', this.category);\n    params = params.set('page', this.page.toString());\n    this.getProducts(params).subscribe(response => {\n      this.products = response.products;\n      this.count = response.count;\n      console.log(this.count);\n      this.pages = Math.ceil(this.count / this.perPage);\n    });\n  }\n  filterProducts() {\n    this.page = 1;\n    this.loadProducts();\n  }\n  changePage(page) {\n    this.currentPage = page;\n    this.loadProducts();\n  }\n  getProducts(params) {\n    return this.http.get('http://localhost/e-commerce%20store/backend/browseProducts.php', {\n      params: params\n    });\n  }\n  getPagesArray() {\n    return Array.from({\n      length: Math.ceil(this.count / this.perPage)\n    }, (_, i) => i + 1);\n  }\n}\nProductCatalogComponent.ɵfac = function ProductCatalogComponent_Factory(t) {\n  return new (t || ProductCatalogComponent)(i0.ɵɵdirectiveInject(i1.HttpClient));\n};\nProductCatalogComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ProductCatalogComponent,\n  selectors: [[\"app-product-catalog\"]],\n  decls: 23,\n  vars: 3,\n  consts: [[\"id\", \"content\"], [\"href\", \"#\"], [\"type\", \"text\", \"placeholder\", \"Enter product name\", 3, \"ngModel\", \"ngModelChange\"], [3, \"click\"], [\"id\", \"product-list\"], [4, \"ngFor\", \"ngForOf\"], [\"id\", \"pagination\", 4, \"ngIf\"], [\"id\", \"pagination\"], [3, \"routerLink\", \"active\", 4, \"ngFor\", \"ngForOf\"], [3, \"routerLink\"]],\n  template: function ProductCatalogComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"nav\")(2, \"a\", 1);\n      i0.ɵɵtext(3, \"Browse Products\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"a\", 1);\n      i0.ɵɵtext(5, \"Add product to Cart\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"a\", 1);\n      i0.ɵɵtext(7, \"Update product\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"a\", 1);\n      i0.ɵɵtext(9, \"Remove product from Cart\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"a\", 1);\n      i0.ɵɵtext(11, \"See basket\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(12, \"br\");\n      i0.ɵɵelementStart(13, \"h1\");\n      i0.ɵɵtext(14, \"Product Catalog\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"input\", 2);\n      i0.ɵɵlistener(\"ngModelChange\", function ProductCatalogComponent_Template_input_ngModelChange_15_listener($event) {\n        return ctx.category = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(16, \"button\", 3);\n      i0.ɵɵlistener(\"click\", function ProductCatalogComponent_Template_button_click_16_listener() {\n        return ctx.filterProducts();\n      });\n      i0.ɵɵtext(17, \"Filter\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(18, \"br\")(19, \"br\");\n      i0.ɵɵelementStart(20, \"div\", 4);\n      i0.ɵɵtemplate(21, ProductCatalogComponent_div_21_Template, 7, 3, \"div\", 5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(22, ProductCatalogComponent_div_22_Template, 2, 1, \"div\", 6);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(15);\n      i0.ɵɵproperty(\"ngModel\", ctx.category);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngForOf\", ctx.products);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.pages > 1);\n    }\n  },\n  dependencies: [i2.NgForOf, i2.NgIf, i3.RouterLink, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgModel],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});\nexport { ProductCatalogComponent };","map":{"version":3,"names":["HttpParams","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate","product_r2","NAME","CATEGORY","PRICE","ɵɵclassProp","p_r4","ctx_r3","currentPage","ɵɵproperty","ɵɵpureFunction1","_c0","ɵɵtemplate","ProductCatalogComponent_div_22_a_1_Template","ctx_r1","getPagesArray","ProductCatalogComponent","constructor","http","products","category","page","count","perPage","pages","ngOnInit","loadProducts","params","set","toString","getProducts","subscribe","response","console","log","Math","ceil","filterProducts","changePage","get","Array","from","length","_","i","ɵɵdirectiveInject","i1","HttpClient","selectors","decls","vars","consts","template","ProductCatalogComponent_Template","rf","ctx","ɵɵelement","ɵɵlistener","ProductCatalogComponent_Template_input_ngModelChange_15_listener","$event","ProductCatalogComponent_Template_button_click_16_listener","ProductCatalogComponent_div_21_Template","ProductCatalogComponent_div_22_Template"],"sources":["C:\\Coding Apps\\Info - University\\Year 2\\Sem2 2022-2023\\Web Programming\\Lab\\XAMPP\\App\\htdocs\\e-commerce store\\frontend\\src\\app\\features\\components\\browseProducts\\product-catalog.component.ts","C:\\Coding Apps\\Info - University\\Year 2\\Sem2 2022-2023\\Web Programming\\Lab\\XAMPP\\App\\htdocs\\e-commerce store\\frontend\\src\\app\\features\\components\\browseProducts\\product-catalog.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { HttpClient, HttpParams } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'app-product-catalog',\r\n  templateUrl: './product-catalog.component.html',\r\n  styleUrls: ['./product-catalog.component.css']\r\n})\r\nexport class ProductCatalogComponent implements OnInit {\r\n  products: any[] = [];\r\n  category: string = '';\r\n  page: number = 1;\r\n  count: number = 0;\r\n  perPage: number = 4;\r\n  pages: number = 0;\r\n  currentPage: number = 1;\r\n\r\n  constructor(private http: HttpClient) { }\r\n\r\n  ngOnInit() {\r\n    this.loadProducts();\r\n  }\r\n\r\n  loadProducts() {\r\n    let params = new HttpParams();\r\n    params = params.set('category', this.category);\r\n    params = params.set('page', this.page.toString());\r\n\r\n    this.getProducts(params).subscribe(response => {\r\n      this.products = response.products;\r\n      this.count = response.count;\r\n      console.log(this.count);\r\n      this.pages = Math.ceil(this.count / this.perPage);\r\n    });\r\n  }\r\n\r\n  filterProducts() {\r\n    this.page = 1;\r\n    this.loadProducts();\r\n  }\r\n\r\n  changePage(page: number) {\r\n    this.currentPage = page;\r\n    this.loadProducts();\r\n  }\r\n\r\n  getProducts(params: HttpParams): Observable<any> {\r\n    return this.http.get<any>('http://localhost/e-commerce%20store/backend/browseProducts.php', { params: params });\r\n  }\r\n\r\n  getPagesArray(): number[] {\r\n    return Array.from({ length: Math.ceil(this.count / this.perPage) }, (_, i) => i + 1);\r\n  }\r\n  \r\n}\r\n","<div id=\"content\">\r\n  <nav>\r\n    <a href=\"#\">Browse Products</a>\r\n    <a href=\"#\">Add product to Cart</a>\r\n    <a href=\"#\">Update product</a>\r\n    <a href=\"#\">Remove product from Cart</a>\r\n    <a href=\"#\">See basket</a>\r\n  </nav>\r\n  <br>\r\n  <h1>Product Catalog</h1>\r\n\r\n  <!-- product name filter -->\r\n  <input type=\"text\" [(ngModel)]=\"category\" placeholder=\"Enter product name\">\r\n  <button (click)=\"filterProducts()\">Filter</button>\r\n  <br><br>\r\n\r\n  <!-- product list -->\r\n  <div id=\"product-list\">\r\n    <div *ngFor=\"let product of products\">\r\n      <h3>{{ product.NAME }}</h3>\r\n      <p>{{ product.CATEGORY }}</p>\r\n      <p>{{ product.PRICE }}</p>\r\n    </div>\r\n  </div>\r\n\r\n  <div *ngIf=\"pages > 1\" id=\"pagination\">\r\n    <a *ngFor=\"let p of getPagesArray()\" [routerLink]=\"['/products', p]\" [class.active]=\"p === currentPage\">{{ p }}</a>\r\n  </div>\r\n</div>\r\n"],"mappings":"AACA,SAAqBA,UAAU,QAAQ,sBAAsB;;;;;;;;ICiBzDC,EAAA,CAAAC,cAAA,UAAsC;IAChCD,EAAA,CAAAE,MAAA,GAAkB;IAAAF,EAAA,CAAAG,YAAA,EAAK;IAC3BH,EAAA,CAAAC,cAAA,QAAG;IAAAD,EAAA,CAAAE,MAAA,GAAsB;IAAAF,EAAA,CAAAG,YAAA,EAAI;IAC7BH,EAAA,CAAAC,cAAA,QAAG;IAAAD,EAAA,CAAAE,MAAA,GAAmB;IAAAF,EAAA,CAAAG,YAAA,EAAI;;;;IAFtBH,EAAA,CAAAI,SAAA,GAAkB;IAAlBJ,EAAA,CAAAK,iBAAA,CAAAC,UAAA,CAAAC,IAAA,CAAkB;IACnBP,EAAA,CAAAI,SAAA,GAAsB;IAAtBJ,EAAA,CAAAK,iBAAA,CAAAC,UAAA,CAAAE,QAAA,CAAsB;IACtBR,EAAA,CAAAI,SAAA,GAAmB;IAAnBJ,EAAA,CAAAK,iBAAA,CAAAC,UAAA,CAAAG,KAAA,CAAmB;;;;;;;;IAKxBT,EAAA,CAAAC,cAAA,WAAwG;IAAAD,EAAA,CAAAE,MAAA,GAAO;IAAAF,EAAA,CAAAG,YAAA,EAAI;;;;;IAA9CH,EAAA,CAAAU,WAAA,WAAAC,IAAA,KAAAC,MAAA,CAAAC,WAAA,CAAkC;IAAlEb,EAAA,CAAAc,UAAA,eAAAd,EAAA,CAAAe,eAAA,IAAAC,GAAA,EAAAL,IAAA,EAA+B;IAAoCX,EAAA,CAAAI,SAAA,GAAO;IAAPJ,EAAA,CAAAK,iBAAA,CAAAM,IAAA,CAAO;;;;;IADjHX,EAAA,CAAAC,cAAA,aAAuC;IACrCD,EAAA,CAAAiB,UAAA,IAAAC,2CAAA,eAAmH;IACrHlB,EAAA,CAAAG,YAAA,EAAM;;;;IADaH,EAAA,CAAAI,SAAA,GAAkB;IAAlBJ,EAAA,CAAAc,UAAA,YAAAK,MAAA,CAAAC,aAAA,GAAkB;;;ADtBvC,MAKaC,uBAAuB;EASlCC,YAAoBC,IAAgB;IAAhB,KAAAA,IAAI,GAAJA,IAAI;IARxB,KAAAC,QAAQ,GAAU,EAAE;IACpB,KAAAC,QAAQ,GAAW,EAAE;IACrB,KAAAC,IAAI,GAAW,CAAC;IAChB,KAAAC,KAAK,GAAW,CAAC;IACjB,KAAAC,OAAO,GAAW,CAAC;IACnB,KAAAC,KAAK,GAAW,CAAC;IACjB,KAAAhB,WAAW,GAAW,CAAC;EAEiB;EAExCiB,QAAQA,CAAA;IACN,IAAI,CAACC,YAAY,EAAE;EACrB;EAEAA,YAAYA,CAAA;IACV,IAAIC,MAAM,GAAG,IAAIjC,UAAU,EAAE;IAC7BiC,MAAM,GAAGA,MAAM,CAACC,GAAG,CAAC,UAAU,EAAE,IAAI,CAACR,QAAQ,CAAC;IAC9CO,MAAM,GAAGA,MAAM,CAACC,GAAG,CAAC,MAAM,EAAE,IAAI,CAACP,IAAI,CAACQ,QAAQ,EAAE,CAAC;IAEjD,IAAI,CAACC,WAAW,CAACH,MAAM,CAAC,CAACI,SAAS,CAACC,QAAQ,IAAG;MAC5C,IAAI,CAACb,QAAQ,GAAGa,QAAQ,CAACb,QAAQ;MACjC,IAAI,CAACG,KAAK,GAAGU,QAAQ,CAACV,KAAK;MAC3BW,OAAO,CAACC,GAAG,CAAC,IAAI,CAACZ,KAAK,CAAC;MACvB,IAAI,CAACE,KAAK,GAAGW,IAAI,CAACC,IAAI,CAAC,IAAI,CAACd,KAAK,GAAG,IAAI,CAACC,OAAO,CAAC;IACnD,CAAC,CAAC;EACJ;EAEAc,cAAcA,CAAA;IACZ,IAAI,CAAChB,IAAI,GAAG,CAAC;IACb,IAAI,CAACK,YAAY,EAAE;EACrB;EAEAY,UAAUA,CAACjB,IAAY;IACrB,IAAI,CAACb,WAAW,GAAGa,IAAI;IACvB,IAAI,CAACK,YAAY,EAAE;EACrB;EAEAI,WAAWA,CAACH,MAAkB;IAC5B,OAAO,IAAI,CAACT,IAAI,CAACqB,GAAG,CAAM,gEAAgE,EAAE;MAAEZ,MAAM,EAAEA;IAAM,CAAE,CAAC;EACjH;EAEAZ,aAAaA,CAAA;IACX,OAAOyB,KAAK,CAACC,IAAI,CAAC;MAAEC,MAAM,EAAEP,IAAI,CAACC,IAAI,CAAC,IAAI,CAACd,KAAK,GAAG,IAAI,CAACC,OAAO;IAAC,CAAE,EAAE,CAACoB,CAAC,EAAEC,CAAC,KAAKA,CAAC,GAAG,CAAC,CAAC;EACtF;;AA5CW5B,uBAAuB,C;mBAAvBA,uBAAuB,EAAArB,EAAA,CAAAkD,iBAAA,CAAAC,EAAA,CAAAC,UAAA;AAAA;AAAvB/B,uBAAuB,C;QAAvBA,uBAAuB;EAAAgC,SAAA;EAAAC,KAAA;EAAAC,IAAA;EAAAC,MAAA;EAAAC,QAAA,WAAAC,iCAAAC,EAAA,EAAAC,GAAA;IAAA,IAAAD,EAAA;MCTpC3D,EAAA,CAAAC,cAAA,aAAkB;MAEFD,EAAA,CAAAE,MAAA,sBAAe;MAAAF,EAAA,CAAAG,YAAA,EAAI;MAC/BH,EAAA,CAAAC,cAAA,WAAY;MAAAD,EAAA,CAAAE,MAAA,0BAAmB;MAAAF,EAAA,CAAAG,YAAA,EAAI;MACnCH,EAAA,CAAAC,cAAA,WAAY;MAAAD,EAAA,CAAAE,MAAA,qBAAc;MAAAF,EAAA,CAAAG,YAAA,EAAI;MAC9BH,EAAA,CAAAC,cAAA,WAAY;MAAAD,EAAA,CAAAE,MAAA,+BAAwB;MAAAF,EAAA,CAAAG,YAAA,EAAI;MACxCH,EAAA,CAAAC,cAAA,YAAY;MAAAD,EAAA,CAAAE,MAAA,kBAAU;MAAAF,EAAA,CAAAG,YAAA,EAAI;MAE5BH,EAAA,CAAA6D,SAAA,UAAI;MACJ7D,EAAA,CAAAC,cAAA,UAAI;MAAAD,EAAA,CAAAE,MAAA,uBAAe;MAAAF,EAAA,CAAAG,YAAA,EAAK;MAGxBH,EAAA,CAAAC,cAAA,gBAA2E;MAAxDD,EAAA,CAAA8D,UAAA,2BAAAC,iEAAAC,MAAA;QAAA,OAAAJ,GAAA,CAAAnC,QAAA,GAAAuC,MAAA;MAAA,EAAsB;MAAzChE,EAAA,CAAAG,YAAA,EAA2E;MAC3EH,EAAA,CAAAC,cAAA,iBAAmC;MAA3BD,EAAA,CAAA8D,UAAA,mBAAAG,0DAAA;QAAA,OAASL,GAAA,CAAAlB,cAAA,EAAgB;MAAA,EAAC;MAAC1C,EAAA,CAAAE,MAAA,cAAM;MAAAF,EAAA,CAAAG,YAAA,EAAS;MAClDH,EAAA,CAAA6D,SAAA,UAAI;MAGJ7D,EAAA,CAAAC,cAAA,cAAuB;MACrBD,EAAA,CAAAiB,UAAA,KAAAiD,uCAAA,iBAIM;MACRlE,EAAA,CAAAG,YAAA,EAAM;MAENH,EAAA,CAAAiB,UAAA,KAAAkD,uCAAA,iBAEM;MACRnE,EAAA,CAAAG,YAAA,EAAM;;;MAhBeH,EAAA,CAAAI,SAAA,IAAsB;MAAtBJ,EAAA,CAAAc,UAAA,YAAA8C,GAAA,CAAAnC,QAAA,CAAsB;MAMdzB,EAAA,CAAAI,SAAA,GAAW;MAAXJ,EAAA,CAAAc,UAAA,YAAA8C,GAAA,CAAApC,QAAA,CAAW;MAOhCxB,EAAA,CAAAI,SAAA,GAAe;MAAfJ,EAAA,CAAAc,UAAA,SAAA8C,GAAA,CAAA/B,KAAA,KAAe;;;;;;SDhBVR,uBAAuB"},"metadata":{},"sourceType":"module","externalDependencies":[]}